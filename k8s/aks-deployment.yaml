apiVersion: v1
kind: Secret
metadata:
  name: nginxsecret
  namespace: default
data:
  nginx.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURGekNDQWYrZ0F3SUJBZ0lKQUpYVmhrdkp4b0Z4TUEwR0NTcUdTSWIzRFFFQkN3VUFNQ0l4RHpBTkJnTlYKQkFNTUJtZHZkRzlrYnpFUE1BMEdBMVVFQ2d3R1oyOTBiMlJ2TUI0WERURTRNRE14TnpBeU5UWTFNRm9YRFRFNQpNRE14TnpBeU5UWTFNRm93SWpFUE1BMEdBMVVFQXd3R1oyOTBiMlJ2TVE4d0RRWURWUVFLREFabmIzUnZaRzh3CmdnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMzTFQySmpwQ1l4U2YvbFVkM29YMGsKdDlLR1JZTVRlcFZKUWJXWW9vakwvTWdVdHlmeUJQczA0Mk05Tmt1aEpBUURpU3Vxam9aSnRlY1RrdHE2TlpBZApCbUk0YWVEQis2QjZtQkd1QVJ5QU95ZDhyVStibmZZNXRBM1YzcFhYdFp6V1laR3JPTXh2YnE3TEo0YWNwc3pOCi9mcWNvRC8yRmM1U2tyblNWNUVQd3dRK3REL2plRUdUdWw2aTNXVTh0QTFacnpDRUNPNDFvNTRoU0dWMUV0NE8KSUtpZ2VQTDBlOGJwT25BdFErb3RoSXpOTG5sdWdjbnBlelhLWU1pblBMSlZubkxzbG1XQ01memp6Q0JDVjM3bgp1aTJTcTFGSE5nVzkzSjI2YmpSeUdCaU9GS0Q2MEVUTC9vYzRuK1ZpakgwOSs1dHgxYnh0VFhKUTBjMXd2MkdSCkFnTUJBQUdqVURCT01CMEdBMVVkRGdRV0JCU1RRR3BkbmR5S3NYVTRxWExURSsyQjZsOS9uekFmQmdOVkhTTUUKR0RBV2dCU1RRR3BkbmR5S3NYVTRxWExURSsyQjZsOS9uekFNQmdOVkhSTUVCVEFEQVFIL01BMEdDU3FHU0liMwpEUUVCQ3dVQUE0SUJBUUNBWVBlNmlWYWpFeFkyQ3l2VlVSL0JVbGFkT1hyZnVlM2hRV3hTc0Y3ZDVQdWhWTTYwClRwb21EWHBValBjWEc4eHJvWDNnQjZDVDF2OEdwa3BIWE9xZzVEL1pkbVhBdTlvNG5vaUdCOEY3RzNHNDVvcS8KSUYvL2RRN2FNblhvWkFiQVhzT1Fkb3VEQWVCd2FSaGlHTUFQYTFDY2g3a1QwSmlub251VWV0a05jWitoMW5IKwo1VCtFL21WTXhRa2RVbkhFR0ZTbzJ1VHZxVHRjYTFwQ0dwdU85YzJMeTg4eTc3SWhvcnoyeW5PdzVZR1hjMjgxCnQyTEZyWU16bDg2cWc3VUQ2OG5nb05rbEJncEZwT1Q4QU4yTkZ5MEFrVFRUdllWTFlHVDI5RU5FcXJTbFlRWFcKbTZQQkxUZHNZdW42WGE4bGpCOEtYZkx0WTI0di92TEpxcE1uCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  nginx.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRQzNMVDJKanBDWXhTZi8KbFVkM29YMGt0OUtHUllNVGVwVkpRYldZb29qTC9NZ1V0eWZ5QlBzMDQyTTlOa3VoSkFRRGlTdXFqb1pKdGVjVAprdHE2TlpBZEJtSTRhZURCKzZCNm1CR3VBUnlBT3lkOHJVK2JuZlk1dEEzVjNwWFh0WnpXWVpHck9NeHZicTdMCko0YWNwc3pOL2ZxY29ELzJGYzVTa3JuU1Y1RVB3d1ErdEQvamVFR1R1bDZpM1dVOHRBMVpyekNFQ080MW81NGgKU0dWMUV0NE9JS2lnZVBMMGU4YnBPbkF0UStvdGhJek5Mbmx1Z2NucGV6WEtZTWluUExKVm5uTHNsbVdDTWZ6agp6Q0JDVjM3bnVpMlNxMUZITmdXOTNKMjZialJ5R0JpT0ZLRDYwRVRML29jNG4rVmlqSDA5KzV0eDFieHRUWEpRCjBjMXd2MkdSQWdNQkFBRUNnZ0VBT2tHbUg1aDZ2a3Q5eEJoSzZXNHZxYnpZdEtGbzVZb0g3b3Q2WUxmWWY5KysKRm5DRndMLzYwTUE4c0p3VEE0Vzd6UkFVRmlOTDdDZHcvVldvUUs2R1RlVFkyZzQ2VUJkaDIzdC9xL0pvaVJQSApKQ3pPYzdTU09abmRDSmJJMnhqRWI1NEtRUVZJWjJ3eEpTVkY5NDVJOW41KzlNODJhR0paQXdQdEcwdUVOQm1NCi9nKzZYck0xMmt3Q01laTVRY0R6Qlo1aVZlQVpGZVVjbmdiaVBQQmpObGljdGtSY3FlQzMvdFMrdDZBLzE0M0QKMjdDOWt5c2I2L1JrL2M1T2ZsUXVBZWx1MFdGaGw5ZUMrQ0lQcWdhTzYzekh2bmRKQ0I4SXJieHdHT3dndXlydwp0VEZhaGk5MFRNbWN0YnE4M1FBdUFRb2N4VVZkOFZpQ1pBTHMrWlI0QVFLQmdRRGNSZ0Y2UEZFZ2RVZGRIaXgvCkFQUzUwMmpjR1RETCt6NSt5aXdDK2Izd243aExnN2pnQlNUVjhTSHJqb1RucFY2eUVBSkEySGpSR3dQOVNxVUcKRG1zak1Zd0p1VFFSL3YrSlEweVBWSC9UeVI5bGFOMUFBdVAvdUtLM3hnZW0rU0s2WjlBaDhDYm9wYW12ZmcvYwo0c25BbWU1cmhCcm9WUVUxZjJHemdRQnVnUUtCZ1FEVTR2QUJuMFhVRGJYTnByT2k0amdaMDl0bWpoMGNrT2k3CnQ0SXRXY2YyTGZidm10UERhcFo2cStsdTZhZ0MvUnJSNDkzdUxsYm02UkMybVZCVjRPVW9Wa0NDZmdWc1dEVXUKUDZQRHVrUXU2SGZKYWI4S1FzOFNjL01lRGtuMnRDQllWcHdsYjRZcVN2dWVNYnQzNmo5cUdkL0xUcXdjbHFsWQpQUFFKdDdpTEVRS0JnUUNpeWhINWRtNDJZTFkyK1QvRk5MMm9QN2QxUWlDdi82UTJLOC9PK3ljR2wrT3AyMVZjCktqRUk4OFl2d2dveThDSkYwbEwzL1lOOGRrekNldEh1NGVVSUEyd05HNVNCNEVTVit1aXYzTEVEb2RYVUttV3AKRXZuUldYRFlCRUJQaER2SUswVEVjQ2t4TW8xdkp1a3VRMlQ3TkVmaHFhWUJJaVJSWHl5amJxa1ZBUUtCZ0FOYQpMMzFYRExweUhOTElOVHZ6WS83RUgwaFdKSTgybVBPYnlDaitxTzl2ZWR2OERDbWZuQThDZGdLUkcxd3dzQ050Cit5aXRBaUZRdWpxbDMyWDZ6S0Q5K3JZVFZmS0cwUStSWVByTURCYlJBbEhob0dpQTlOSE5rWjUvaXhxZmE0TDQKbWl6Y3ZMZ2R4aWlQait3cmZDUW5sQ2FYYm81a3NQWDZ2NzBIYjVpQkFvR0JBSWtSeUFwTTFFVVZsVFpidHdQUgp3b1dvQ3JUaTN1VnpmVUxldjE5dUkramR2VVZPcFpJZE05RUxaVlJ5VVNIT1lJMzZ5VWpUcnhZY2txUUFmR0NaCnlUTFVrcWRQR3FUSVVFc3dNaVlVcTArMXgyazFERmY4TStYeFpudjh4Q0E5eVQ1NkZiem12VVpKczdvMFBmbkkKUXZDc01Xb2NLSEl0Qmx6QWdyRmJNOHYxCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: v1
kind: Service
metadata:
  name: gotodo-svc
  labels:
    app: gotodo-app
spec:
  type: LoadBalancer
  ports:
  - port: 80
    protocol: TCP
    name: http
  - port: 443
    protocol: TCP
    name: https
  selector:
    app: gotodo-app
---
apiVersion: apps/v1beta2 
kind: Deployment
metadata:
  name: gotodo-app
spec:
  selector:
    matchLabels:
      app: gotodo-app
  replicas: 1 
  template: # create pods using pod definition in this template
    metadata:
      labels:
        app: gotodo-app
    spec:
      volumes:
      - name: secret-volume
        secret:
          secretName: nginxsecret
      containers:
      - name: gotodo-ctn
        image: chunliucr.azurecr.io/gotodoimg:v0.3.7
        ports:
        - containerPort: 80
        - containerPort: 443
        volumeMounts:
        - mountPath: /etc/nginx/ssl
          name: secret-volume
